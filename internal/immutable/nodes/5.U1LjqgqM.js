import{c as je,a as ue}from"../chunks/index.BOw0JMqb.js";import{f as ye,m as P,q as K,a as B,u as F,g as G,b as X,n as ne,w as Ce,v as $e,r as Ne,l as ae,d as J,o as Oe,x as Se,c as Ue,i as Le}from"../chunks/scheduler.Bu9aYH8f.js";import{S as T,i as A,c as U,d as L,m as M,o as w,p as V,q,e as y,s as O,a as $,b as I,f as S,h as _,j as D,k as N,l as k,y as Q,w as R,E as W,K as Y,G as ee,I as Me,u as qe,H as Pe,r as Te,t as te,g as le,n as se,v as Z}from"../chunks/index.QYv70b3f.js";import{e as x,u as Ee,o as Ae,d as He}from"../chunks/each.C8Rgkwia.js";import{L as ze}from"../chunks/i18n-svelte.DgV7mMaz.js";import{I as Ie,g as De,a as Ve}from"../chunks/Icon.CkcrXJuI.js";import{p as Je,D as Ke}from"../chunks/Dropdown.CcNYrred.js";import{f as de,a as _e}from"../chunks/index.DHw_VhY_.js";const Be=async o=>({cameras:await je.cameras()}),bt=Object.freeze(Object.defineProperty({__proto__:null,load:Be},Symbol.toStringTag,{value:"Module"}));function Fe(o){let e;const s=o[2].default,t=B(s,o,o[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&F(t,s,l,l[3],e?X(s,l[3],n,null):G(l[3]),null)},i(l){e||(w(t,l),e=!0)},o(l){V(t,l),e=!1},d(l){t&&t.d(l)}}}function Ge(o){let e,s;const t=[{name:"play"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Fe]},$$scope:{ctx:o}};for(let n=0;n<t.length;n+=1)l=P(l,t[n]);return e=new Ie({props:l}),{c(){U(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){M(e,n,a),s=!0},p(n,[a]){const r=a&3?De(t,[t[0],a&2&&Ve(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){s||(w(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){q(e,n)}}}function Xe(o,e,s){let{$$slots:t={},$$scope:l}=e;const n=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];return o.$$set=a=>{s(1,e=P(P({},e),K(a))),"$$scope"in a&&s(3,l=a.$$scope)},e=K(e),[n,e,t,l]}class Qe extends T{constructor(e){super(),A(this,e,Xe,Ge,ye,{})}}function Re(o){let e;const s=o[2].default,t=B(s,o,o[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&F(t,s,l,l[3],e?X(s,l[3],n,null):G(l[3]),null)},i(l){e||(w(t,l),e=!0)},o(l){V(t,l),e=!1},d(l){t&&t.d(l)}}}function We(o){let e,s;const t=[{name:"x"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Re]},$$scope:{ctx:o}};for(let n=0;n<t.length;n+=1)l=P(l,t[n]);return e=new Ie({props:l}),{c(){U(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){M(e,n,a),s=!0},p(n,[a]){const r=a&3?De(t,[t[0],a&2&&Ve(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){s||(w(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){q(e,n)}}}function Ye(o,e,s){let{$$slots:t={},$$scope:l}=e;const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return o.$$set=a=>{s(1,e=P(P({},e),K(a))),"$$scope"in a&&s(3,l=a.$$scope)},e=K(e),[n,e,t,l]}class Ze extends T{constructor(e){super(),A(this,e,Ye,We,ye,{})}}const xe=o=>({}),me=o=>({});function he(o){let e,s,t;return{c(){e=y("div"),this.h()},l(l){e=$(l,"DIV",{class:!0}),I(e).forEach(_),this.h()},h(){D(e,"class","fixed inset-0 bg-black bg-opacity-25"),W(e,"hidden",o[2]?!o[0]:!0)},m(l,n){N(l,e,n),t=!0},p(l,n){(!t||n&5)&&W(e,"hidden",l[2]?!l[0]:!0)},i(l){t||(l&&$e(()=>{t&&(s||(s=Y(e,de,{duration:150},!0)),s.run(1))}),t=!0)},o(l){l&&(s||(s=Y(e,de,{duration:150},!1)),s.run(0)),t=!1},d(l){l&&_(e),l&&s&&s.end()}}}function pe(o){let e,s,t,l,n,a,r,f,i,p,m,b,g,h,C;const u=o[9].title,c=B(u,o,o[8],me);i=new Ze({});const v=o[9].default,E=B(v,o,o[8],null);return{c(){e=y("div"),s=y("div"),t=y("div"),l=y("div"),n=y("div"),c&&c.c(),a=O(),r=y("button"),f=y("div"),U(i.$$.fragment),p=O(),m=y("div"),E&&E.c(),this.h()},l(d){e=$(d,"DIV",{class:!0});var j=I(e);s=$(j,"DIV",{class:!0});var oe=I(s);t=$(oe,"DIV",{class:!0});var H=I(t);l=$(H,"DIV",{class:!0});var z=I(l);n=$(z,"DIV",{class:!0});var re=I(n);c&&c.l(re),re.forEach(_),a=S(z),r=$(z,"BUTTON",{class:!0});var ie=I(r);f=$(ie,"DIV",{class:!0});var fe=I(f);L(i.$$.fragment,fe),fe.forEach(_),ie.forEach(_),z.forEach(_),p=S(H),m=$(H,"DIV",{class:!0});var ce=I(m);E&&E.l(ce),ce.forEach(_),H.forEach(_),oe.forEach(_),j.forEach(_),this.h()},h(){D(n,"class","flex flex-grow flex-col"),D(f,"class","h-6 w-6"),D(r,"class","btn icon"),D(l,"class","flex flex-shrink flex-row items-start justify-between px-4 pt-4"),D(m,"class","relative flex-grow flex-col px-4 pb-4 pt-0"),D(t,"class","relative w-full rounded bg-white shadow-lg sm:my-8 sm:max-w-lg dark:bg-gray-800"),W(t,"m-auto",o[1]),D(s,"class","flex min-h-full items-end justify-center p-4 sm:items-center sm:p-0"),D(e,"class","fixed inset-0 overflow-y-auto")},m(d,j){N(d,e,j),k(e,s),k(s,t),k(t,l),k(l,n),c&&c.m(n,null),k(l,a),k(l,r),k(r,f),M(i,f,null),k(t,p),k(t,m),E&&E.m(m,null),o[10](t),g=!0,h||(C=[ee(r,"click",Me(o[4])),ee(e,"pointerdown",o[5])],h=!0)},p(d,j){c&&c.p&&(!g||j&256)&&F(c,u,d,d[8],g?X(u,d[8],j,xe):G(d[8]),me),E&&E.p&&(!g||j&256)&&F(E,v,d,d[8],g?X(v,d[8],j,null):G(d[8]),null),(!g||j&2)&&W(t,"m-auto",d[1])},i(d){g||(w(c,d),w(i.$$.fragment,d),w(E,d),d&&$e(()=>{g&&(b||(b=Y(e,_e,{duration:150,y:300},!0)),b.run(1))}),g=!0)},o(d){V(c,d),V(i.$$.fragment,d),V(E,d),d&&(b||(b=Y(e,_e,{duration:150,y:300},!1)),b.run(0)),g=!1},d(d){d&&_(e),c&&c.d(d),q(i),E&&E.d(d),o[10](null),d&&b&&b.end(),h=!1,Ne(C)}}}function et(o){let e,s,t,l,n,a=o[0]&&he(o),r=o[0]&&pe(o);return{c(){e=y("div"),a&&a.c(),s=O(),r&&r.c(),this.h()},l(f){e=$(f,"DIV",{class:!0,role:!0,"aria-modal":!0});var i=I(e);a&&a.l(i),s=S(i),r&&r.l(i),i.forEach(_),this.h()},h(){D(e,"class","relative"),D(e,"role","dialog"),D(e,"aria-modal","true")},m(f,i){N(f,e,i),a&&a.m(e,null),k(e,s),r&&r.m(e,null),t=!0,l||(n=Ce(Je.call(null,e)),l=!0)},p(f,[i]){f[0]?a?(a.p(f,i),i&1&&w(a,1)):(a=he(f),a.c(),w(a,1),a.m(e,s)):a&&(Q(),V(a,1,1,()=>{a=null}),R()),f[0]?r?(r.p(f,i),i&1&&w(r,1)):(r=pe(f),r.c(),w(r,1),r.m(e,null)):r&&(Q(),V(r,1,1,()=>{r=null}),R())},i(f){t||(w(a),w(r),t=!0)},o(f){V(a),V(r),t=!1},d(f){f&&_(e),a&&a.d(),r&&r.d(),l=!1,n()}}}function tt(o,e,s){let{$$slots:t={},$$scope:l}=e,{onClose:n=()=>{}}=e,{small:a=!1}=e,{open:r=!1}=e,{backdrop:f=!0}=e,{backgroundClose:i=f}=e;function p(){s(0,r=!1),n()}let m;function b(h){if(i){if(m.contains(h.target)){h.stopPropagation();return}r&&(s(0,r=!1),n())}}function g(h){ae[h?"unshift":"push"](()=>{m=h,s(3,m)})}return o.$$set=h=>{"onClose"in h&&s(6,n=h.onClose),"small"in h&&s(1,a=h.small),"open"in h&&s(0,r=h.open),"backdrop"in h&&s(2,f=h.backdrop),"backgroundClose"in h&&s(7,i=h.backgroundClose),"$$scope"in h&&s(8,l=h.$$scope)},[r,a,f,m,p,b,n,i,l,t,g]}class lt extends T{constructor(e){super(),A(this,e,tt,et,ne,{onClose:6,small:1,open:0,backdrop:2,backgroundClose:7})}}function st(o){let e,s='<track kind="captions"/>';return{c(){e=y("video"),e.innerHTML=s,this.h()},l(t){e=$(t,"VIDEO",{"data-svelte-h":!0}),qe(e)!=="svelte-pq7qhv"&&(e.innerHTML=s),this.h()},h(){e.controls=!0,e.autoplay=!0},m(t,l){N(t,e,l),o[2](e)},p:J,i:J,o:J,d(t){t&&_(e),o[2](null)}}}function nt(o,e,s){let{rtspUrl:t}=e,l,n,a=!1;async function r(i){console.log("peer initied");let p=new MediaStream;s(0,n.srcObject=p,n),i.on("track",m=>{console.log("peer track",m.track),p.addTrack(m.track)}),i.on("close",()=>{console.log("peer closed"),a&&ue("webrtcrtsp").then(r)}),i.once("data",m=>{console.log("peer data",m);const b=JSON.parse(m);for(const g of b)i.addTransceiverFromKind(g,{direction:"recvonly"})}),console.log("peer send data"),i.send(JSON.stringify({type:"rtsp",rtspUrl:t})),l=i}Oe(()=>(a=!0,ue("webrtcrtsp").then(r),()=>{a=!1,l==null||l.close()}));function f(i){ae[i?"unshift":"push"](()=>{n=i,s(0,n)})}return o.$$set=i=>{"rtspUrl"in i&&s(1,t=i.rtspUrl)},[n,t,f]}class at extends T{constructor(e){super(),A(this,e,nt,st,ne,{rtspUrl:1})}}function ge(o,e,s){const t=o.slice();return t[7]=e[s],t}function ve(o,e,s){const t=o.slice();return t[10]=e[s],t}function be(o,e){let s,t=e[10]+"",l,n,a,r;return{key:o,first:null,c(){s=y("li"),l=te(t),n=O(),this.h()},l(f){s=$(f,"LI",{class:!0});var i=I(s);l=le(i,t),n=S(i),i.forEach(_),this.h()},h(){D(s,"class","flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"),this.first=s},m(f,i){N(f,s,i),k(s,l),k(s,n),a||(r=ee(s,"click",function(){Le(e[5](e[7],e[10]))&&e[5](e[7],e[10]).apply(this,arguments)}),a=!0)},p(f,i){e=f,i&1&&t!==(t=e[10]+"")&&se(l,t)},d(f){f&&_(s),a=!1,r()}}}function ot(o){let e=[],s=new Map,t,l=x(Object.keys(o[7].mediaUris));const n=a=>a[10];for(let a=0;a<l.length;a+=1){let r=ve(o,l,a),f=n(r);s.set(f,e[a]=be(f,r))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Z()},l(a){for(let r=0;r<e.length;r+=1)e[r].l(a);t=Z()},m(a,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,r);N(a,t,r)},p(a,r){r&33&&(l=x(Object.keys(a[7].mediaUris)),e=Ee(e,r,n,1,a,l,s,t.parentNode,He,be,t,ve))},d(a){a&&_(t);for(let r=0;r<e.length;r+=1)e[r].d(a)}}}function rt(o){let e,s;return e=new Qe({props:{slot:"button"}}),{c(){U(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p:J,i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){q(e,t)}}}function ke(o,e){let s,t,l,n=e[7].name+"",a,r,f,i=e[7].updatedAt.toLocaleString()+"",p,m,b,g,h,C;return g=new Ke({props:{$$slots:{button:[rt],default:[ot]},$$scope:{ctx:e}}}),{key:o,first:null,c(){s=y("div"),t=y("div"),l=y("p"),a=te(n),r=O(),f=y("p"),p=te(i),m=O(),b=y("div"),U(g.$$.fragment),h=O(),this.h()},l(u){s=$(u,"DIV",{class:!0});var c=I(s);t=$(c,"DIV",{class:!0});var v=I(t);l=$(v,"P",{});var E=I(l);a=le(E,n),E.forEach(_),r=S(v),f=$(v,"P",{});var d=I(f);p=le(d,i),d.forEach(_),v.forEach(_),m=S(c),b=$(c,"DIV",{class:!0});var j=I(b);L(g.$$.fragment,j),j.forEach(_),h=S(c),c.forEach(_),this.h()},h(){D(t,"class","flex flex-row"),D(b,"class","flex flex-row"),D(s,"class","flex flex-row justify-between"),this.first=s},m(u,c){N(u,s,c),k(s,t),k(t,l),k(l,a),k(t,r),k(t,f),k(f,p),k(s,m),k(s,b),M(g,b,null),k(s,h),C=!0},p(u,c){e=u,(!C||c&1)&&n!==(n=e[7].name+"")&&se(a,n),(!C||c&1)&&i!==(i=e[7].updatedAt.toLocaleString()+"")&&se(p,i);const v={};c&8193&&(v.$$scope={dirty:c,ctx:e}),g.$set(v)},i(u){C||(w(g.$$.fragment,u),C=!0)},o(u){V(g.$$.fragment,u),C=!1},d(u){u&&_(s),q(g)}}}function we(o){let e,s;return e=new at({props:{rtspUrl:o[2].mediaUris[o[3]]}}),{c(){U(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p(t,l){const n={};l&12&&(n.rtspUrl=t[2].mediaUris[t[3]]),e.$set(n)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){q(e,t)}}}function it(o){let e,s,t=o[2]&&o[3]&&we(o);return{c(){t&&t.c(),e=Z()},l(l){t&&t.l(l),e=Z()},m(l,n){t&&t.m(l,n),N(l,e,n),s=!0},p(l,n){l[2]&&l[3]?t?(t.p(l,n),n&12&&w(t,1)):(t=we(l),t.c(),w(t,1),t.m(e.parentNode,e)):t&&(Q(),V(t,1,1,()=>{t=null}),R())},i(l){s||(w(t),s=!0)},o(l){V(t),s=!1},d(l){l&&_(e),t&&t.d(l)}}}function ft(o){let e,s,t,l,n,a=[],r=new Map,f,i,p,m;document.title=e=o[4].cameras.title();let b=x(o[0].cameras);const g=u=>u[7].hardwareId;for(let u=0;u<b.length;u+=1){let c=ge(o,b,u),v=g(c);r.set(v,a[u]=ke(v,c))}function h(u){o[6](u)}let C={$$slots:{default:[it]},$$scope:{ctx:o}};return o[1]!==void 0&&(C.open=o[1]),i=new lt({props:C}),ae.push(()=>Pe(i,"open",h)),{c(){s=O(),t=y("div"),l=y("div"),n=y("div");for(let u=0;u<a.length;u+=1)a[u].c();f=O(),U(i.$$.fragment),this.h()},l(u){Te("svelte-1uyq96z",document.head).forEach(_),s=S(u),t=$(u,"DIV",{class:!0});var v=I(t);l=$(v,"DIV",{class:!0});var E=I(l);n=$(E,"DIV",{class:!0});var d=I(n);for(let j=0;j<a.length;j+=1)a[j].l(d);d.forEach(_),E.forEach(_),v.forEach(_),f=S(u),L(i.$$.fragment,u),this.h()},h(){D(n,"class","flex flex-col"),D(l,"class","mx-auto mt-4 flex w-full max-w-6xl flex-shrink flex-col bg-white p-4 shadow dark:bg-gray-800"),D(t,"class","flex flex-col justify-end px-4 md:justify-start")},m(u,c){N(u,s,c),N(u,t,c),k(t,l),k(l,n);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(n,null);N(u,f,c),M(i,u,c),m=!0},p(u,[c]){(!m||c&16)&&e!==(e=u[4].cameras.title())&&(document.title=e),c&33&&(b=x(u[0].cameras),Q(),a=Ee(a,c,g,1,u,b,r,n,Ae,ke,null,ge),R());const v={};c&8204&&(v.$$scope={dirty:c,ctx:u}),!p&&c&2&&(p=!0,v.open=u[1],Se(()=>p=!1)),i.$set(v)},i(u){if(!m){for(let c=0;c<b.length;c+=1)w(a[c]);w(i.$$.fragment,u),m=!0}},o(u){for(let c=0;c<a.length;c+=1)V(a[c]);V(i.$$.fragment,u),m=!1},d(u){u&&(_(s),_(t),_(f));for(let c=0;c<a.length;c+=1)a[c].d();q(i,u)}}}function ct(o,e,s){let t;Ue(o,ze,p=>s(4,t=p));let{data:l}=e,n=!1,a,r;function f(p,m){return()=>{s(1,n=!0),s(2,a=p),s(3,r=m)}}function i(p){n=p,s(1,n)}return o.$$set=p=>{"data"in p&&s(0,l=p.data)},[l,n,a,r,t,f,i]}class kt extends T{constructor(e){super(),A(this,e,ct,ft,ne,{data:0})}}export{kt as component,bt as universal};
