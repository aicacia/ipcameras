import{n as de,r as _e,c as ce}from"../chunks/scheduler.CgEFyQ-S.js";import{S as me,i as pe,e as b,t as K,s as T,c as X,a as I,b as y,g as Q,h as _,f as j,d as Y,j as i,k as Z,l as o,u as J,m as x,v as H,w as ge,n as W,o as N,x as ve,p as C,y as we,q as ee,r as be}from"../chunks/index.DfAfitrp.js";import{L as he}from"../chunks/i18n-svelte.DO6JJ3x7.js";import{g as Ie}from"../chunks/entry.C7xj7j3Z.js";import{b as $e}from"../chunks/paths.CDMbSYKj.js";import{I as ue,a as Ee,S as Se,b as ye,h as Le,O as ke,c as ie,v as oe}from"../chunks/InputResults.C9hpT5ea.js";import{d as Ve}from"../chunks/debounce.DpwXS7NU.js";import{s as De}from"../chunks/user.DvHJfosi.js";function fe(t){let a,e,s,u;return s=new Se({}),{c(){a=b("div"),e=b("div"),X(s.$$.fragment),this.h()},l(n){a=I(n,"DIV",{class:!0});var h=y(a);e=I(h,"DIV",{class:!0});var r=y(e);Y(s.$$.fragment,r),r.forEach(_),h.forEach(_),this.h()},h(){i(e,"class","inline-block h-6 w-6"),i(a,"class","mr-2 flex flex-row justify-center")},m(n,h){Z(n,a,h),o(a,e),x(s,e,null),u=!0},i(n){u||(N(s.$$.fragment,n),u=!0)},o(n){C(s.$$.fragment,n),u=!1},d(n){n&&_(a),ee(s)}}}function Pe(t){let a,e,s,u=t[2].auth.usernameLabel()+"",n,h,r,E,$,g,c,f,m,V,S=t[2].auth.passwordLabel()+"",D,q,v,w,A,te,B,ae,O,L,M,R=t[2].auth.signIn()+"",z,k,se,ne;c=new ue({props:{name:"username",result:t[1]}}),B=new ue({props:{name:"password",result:t[1]}});let p=t[0]&&fe();return{c(){a=b("form"),e=b("div"),s=b("label"),n=K(u),h=T(),r=b("input"),g=T(),X(c.$$.fragment),f=T(),m=b("div"),V=b("label"),D=K(S),q=T(),v=b("input"),te=T(),X(B.$$.fragment),ae=T(),O=b("div"),L=b("button"),p&&p.c(),M=T(),z=K(R),this.h()},l(l){a=I(l,"FORM",{});var d=y(a);e=I(d,"DIV",{class:!0});var P=y(e);s=I(P,"LABEL",{for:!0});var F=y(s);n=Q(F,u),F.forEach(_),h=j(P),r=I(P,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),g=j(P),Y(c.$$.fragment,P),P.forEach(_),f=j(d),m=I(d,"DIV",{class:!0});var U=y(m);V=I(U,"LABEL",{for:!0});var re=y(V);D=Q(re,S),re.forEach(_),q=j(U),v=I(U,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),te=j(U),Y(B.$$.fragment,U),U.forEach(_),ae=j(d),O=I(d,"DIV",{class:!0});var le=y(O);L=I(le,"BUTTON",{type:!0,class:!0});var G=y(L);p&&p.l(G),M=j(G),z=Q(G,R),G.forEach(_),le.forEach(_),d.forEach(_),this.h()},h(){i(s,"for","username"),i(r,"class",E="w-full "+t[5]("username")),i(r,"type","text"),i(r,"name","username"),i(r,"placeholder",$=t[2].auth.usernamePlaceholder()),i(e,"class","mb-2"),i(V,"for","username"),i(v,"class",w="w-full "+t[5]("password")),i(v,"type","password"),i(v,"name","password"),i(v,"placeholder",A=t[2].auth.passwordPlaceholder()),i(m,"class","mb-2"),i(L,"type","submit"),i(L,"class","btn primary flex flex-shrink"),L.disabled=t[6],i(O,"class","flex flex-row justify-end")},m(l,d){Z(l,a,d),o(a,e),o(e,s),o(s,n),o(e,h),o(e,r),J(r,t[3]),o(e,g),x(c,e,null),o(a,f),o(a,m),o(m,V),o(V,D),o(m,q),o(m,v),J(v,t[4]),o(m,te),x(B,m,null),o(a,ae),o(a,O),o(O,L),p&&p.m(L,null),o(L,M),o(L,z),k=!0,se||(ne=[H(r,"input",t[11]),H(r,"input",t[7]),H(v,"input",t[12]),H(v,"input",t[7]),H(a,"submit",ge(t[8]))],se=!0)},p(l,[d]){(!k||d&4)&&u!==(u=l[2].auth.usernameLabel()+"")&&W(n,u),(!k||d&32&&E!==(E="w-full "+l[5]("username")))&&i(r,"class",E),(!k||d&4&&$!==($=l[2].auth.usernamePlaceholder()))&&i(r,"placeholder",$),d&8&&r.value!==l[3]&&J(r,l[3]);const P={};d&2&&(P.result=l[1]),c.$set(P),(!k||d&4)&&S!==(S=l[2].auth.passwordLabel()+"")&&W(D,S),(!k||d&32&&w!==(w="w-full "+l[5]("password")))&&i(v,"class",w),(!k||d&4&&A!==(A=l[2].auth.passwordPlaceholder()))&&i(v,"placeholder",A),d&16&&v.value!==l[4]&&J(v,l[4]);const F={};d&2&&(F.result=l[1]),B.$set(F),l[0]?p?d&1&&N(p,1):(p=fe(),p.c(),N(p,1),p.m(L,M)):p&&(ve(),C(p,1,1,()=>{p=null}),we()),(!k||d&4)&&R!==(R=l[2].auth.signIn()+"")&&W(z,R),(!k||d&64)&&(L.disabled=l[6])},i(l){k||(N(c.$$.fragment,l),N(B.$$.fragment,l),N(p),k=!0)},o(l){C(c.$$.fragment,l),C(B.$$.fragment,l),C(p),k=!1},d(l){l&&_(a),ee(c),ee(B),p&&p.d(),se=!1,_e(ne)}}}const Te=t=>ye((a={},e)=>{e.length&&(ke(e),ie("username",t.errors.message.required(),()=>{oe(a.username).isNotBlank()}),ie("password",t.errors.message.required(),()=>{oe(a.password).isNotBlank()}))});function je(t,a,e){let s,u,n,h,r;ce(t,he,w=>e(2,r=w));let{onSignin:E}=a,$="",g="";const c=new Set,f=Ve(()=>{s({username:$,password:g},Array.from(c)).done(w=>{e(1,u=w)}),c.clear()},300);function m(){c.add("username"),c.add("password"),f(),f.flush()}function V(w){w.currentTarget.value=w.currentTarget.value,c.add(w.currentTarget.name),f()}let S=!1;async function D(w){try{e(0,S=!0),m(),u.isValid()&&(await De($,g),await E())}catch(A){await Le(A)}finally{e(0,S=!1)}}function q(){$=this.value,e(3,$)}function v(){g=this.value,e(4,g)}return t.$$set=w=>{"onSignin"in w&&e(9,E=w.onSignin)},t.$$.update=()=>{t.$$.dirty&4&&e(10,s=Te(r)),t.$$.dirty&1024&&e(1,u=s.get()),t.$$.dirty&1&&e(6,n=S),t.$$.dirty&2&&e(5,h=Ee(u,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[S,u,r,$,g,h,n,V,D,E,s,q,v]}class qe extends me{constructor(a){super(),pe(this,a,je,Pe,de,{onSignin:9})}}function Be(t){let a,e,s,u,n,h,r=t[0].auth.signIn()+"",E,$,g,c;return document.title=a=t[0].auth.signIn(),g=new qe({props:{onSignin:t[1]}}),{c(){e=T(),s=b("div"),u=b("div"),n=b("div"),h=b("h1"),E=K(r),$=T(),X(g.$$.fragment),this.h()},l(f){be("svelte-1jem6qx",document.head).forEach(_),e=j(f),s=I(f,"DIV",{class:!0});var V=y(s);u=I(V,"DIV",{class:!0});var S=y(u);n=I(S,"DIV",{class:!0});var D=y(n);h=I(D,"H1",{class:!0});var q=y(h);E=Q(q,r),q.forEach(_),$=j(D),Y(g.$$.fragment,D),D.forEach(_),S.forEach(_),V.forEach(_),this.h()},h(){i(h,"class","mb-1"),i(n,"class","flex flex-grow flex-col bg-white p-4 shadow dark:bg-gray-800"),i(u,"class","mx-auto flex w-full flex-shrink flex-col p-4 py-10 md:w-72"),i(s,"class","flex flex-grow flex-col justify-end md:justify-start")},m(f,m){Z(f,e,m),Z(f,s,m),o(s,u),o(u,n),o(n,h),o(h,E),o(n,$),x(g,n,null),c=!0},p(f,[m]){(!c||m&1)&&a!==(a=f[0].auth.signIn())&&(document.title=a),(!c||m&1)&&r!==(r=f[0].auth.signIn()+"")&&W(E,r)},i(f){c||(N(g.$$.fragment,f),c=!0)},o(f){C(g.$$.fragment,f),c=!1},d(f){f&&(_(e),_(s)),ee(g)}}}function Ne(t,a,e){let s;ce(t,he,n=>e(0,s=n));async function u(){await Ie(`${$e}/`)}return[s,u]}class ze extends me{constructor(a){super(),pe(this,a,Ne,Be,de,{})}}export{ze as component};
