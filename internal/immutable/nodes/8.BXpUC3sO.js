import{n as De,r as We,c as be,v as st,d as ze}from"../chunks/scheduler.Bu9aYH8f.js";import{S as Be,i as Oe,e as g,t as ee,s as q,c as ae,a as v,b as A,g as te,h as m,f as j,d as re,j as r,k as we,l as a,E as le,m as ne,F as z,G as Ke,n as se,o as M,y as qe,p as J,w as je,q as ue,r as lt,H as Re,I as at}from"../chunks/index.Bw_3EgnJ.js";import{L as Ce}from"../chunks/i18n-svelte.DgV7mMaz.js";import{I as _e,a as Qe,S as Xe,b as Ye,c as rt,h as Ze,O as xe,d as ge,v as ve,C as nt,e as ut,A as ot,f as Me}from"../chunks/InputResults.Bx7ANY8g.js";import{d as et}from"../chunks/debounce.BzpYRo3t.js";import{p as it,s as tt,h as ft,b as ct}from"../chunks/httpAccess.TKbybTVh.js";import{g as ht}from"../chunks/notifications.CB67zdXi.js";import{g as pt}from"../chunks/entry.9_qOk4_Z.js";import{b as dt}from"../chunks/paths.Cz2GhCN0.js";function Ge(e){let s,t,l,o;return l=new Xe({}),{c(){s=g("div"),t=g("div"),ae(l.$$.fragment),this.h()},l(n){s=v(n,"DIV",{class:!0});var p=A(s);t=v(p,"DIV",{class:!0});var u=A(t);re(l.$$.fragment,u),u.forEach(m),p.forEach(m),this.h()},h(){r(t,"class","inline-block h-6 w-6"),r(s,"class","mr-2 flex flex-row justify-center")},m(n,p){we(n,s,p),a(s,t),ne(l,t,null),o=!0},i(n){o||(M(l.$$.fragment,n),o=!0)},o(n){J(l.$$.fragment,n),o=!1},d(n){n&&m(s),ue(l)}}}function mt(e){let s,t,l,o=e[2].auth.hostLabel()+"",n,p,u,N,$,k,b,h,w,L,D=e[2].auth.sslLabel()+"",C,W,i,T,P,S,K,B,f,F=e[2].auth.idLabel()+"",I,U,E,x,Q,V,d,y,O,X,Y=e[2].auth.passwordLabel()+"",ce,he,H,Le,Pe,ye,fe,Ve,pe,Z,Te,Ee=e[2].auth.signIn()+"",Se,G,Ne,Ue;b=new _e({props:{name:"host",result:e[1]}}),S=new _e({props:{name:"ssl",result:e[1]}}),d=new _e({props:{name:"id",result:e[1]}}),fe=new _e({props:{name:"password",result:e[1]}});let R=e[0]&&Ge();return{c(){s=g("form"),t=g("div"),l=g("label"),n=ee(o),p=q(),u=g("input"),k=q(),ae(b.$$.fragment),h=q(),w=g("div"),L=g("label"),C=ee(D),W=q(),i=g("input"),P=q(),ae(S.$$.fragment),K=q(),B=g("div"),f=g("label"),I=ee(F),U=q(),E=g("input"),V=q(),ae(d.$$.fragment),y=q(),O=g("div"),X=g("label"),ce=ee(Y),he=q(),H=g("input"),ye=q(),ae(fe.$$.fragment),Ve=q(),pe=g("div"),Z=g("button"),R&&R.c(),Te=q(),Se=ee(Ee),this.h()},l(c){s=v(c,"FORM",{});var _=A(s);t=v(_,"DIV",{class:!0});var oe=A(t);l=v(oe,"LABEL",{for:!0});var ke=A(l);n=te(ke,o),ke.forEach(m),p=j(oe),u=v(oe,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),k=j(oe),re(b.$$.fragment,oe),oe.forEach(m),h=j(_),w=v(_,"DIV",{class:!0});var ie=A(w);L=v(ie,"LABEL",{for:!0});var Ie=A(L);C=te(Ie,D),Ie.forEach(m),W=j(ie),i=v(ie,"INPUT",{class:!0,type:!0,name:!0}),P=j(ie),re(S.$$.fragment,ie),ie.forEach(m),K=j(_),B=v(_,"DIV",{class:!0});var de=A(B);f=v(de,"LABEL",{for:!0});var $e=A(f);I=te($e,F),$e.forEach(m),U=j(de),E=v(de,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),V=j(de),re(d.$$.fragment,de),de.forEach(m),y=j(_),O=v(_,"DIV",{class:!0});var me=A(O);X=v(me,"LABEL",{for:!0});var He=A(X);ce=te(He,Y),He.forEach(m),he=j(me),H=v(me,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),ye=j(me),re(fe.$$.fragment,me),me.forEach(m),Ve=j(_),pe=v(_,"DIV",{class:!0});var Fe=A(pe);Z=v(Fe,"BUTTON",{type:!0,class:!0});var Ae=A(Z);R&&R.l(Ae),Te=j(Ae),Se=te(Ae,Ee),Ae.forEach(m),Fe.forEach(m),_.forEach(m),this.h()},h(){r(l,"for","host"),r(u,"class",N="w-full "+e[7]("host")),r(u,"type","text"),r(u,"name","host"),r(u,"placeholder",$=e[2].auth.hostPlaceholder()),r(t,"class","mb-2"),r(L,"for","ssl"),r(i,"class",T=e[7]("ssl")),r(i,"type","checkbox"),r(i,"name","ssl"),r(w,"class","mb-2"),r(f,"for","host"),r(E,"class",x="w-full "+e[7]("id")),r(E,"type","text"),r(E,"name","id"),r(E,"autocomplete","username"),r(E,"placeholder",Q=e[2].auth.idPlaceholder()),r(B,"class","mb-2"),r(X,"for","host"),r(H,"class",Le="w-full "+e[7]("password")),r(H,"type","password"),r(H,"name","password"),r(H,"autocomplete","current-password"),r(H,"placeholder",Pe=e[2].auth.passwordPlaceholder()),r(O,"class","mb-2"),r(Z,"type","submit"),r(Z,"class","btn primary flex flex-shrink"),Z.disabled=e[8],r(pe,"class","flex flex-row justify-end")},m(c,_){we(c,s,_),a(s,t),a(t,l),a(l,n),a(t,p),a(t,u),le(u,e[6]),a(t,k),ne(b,t,null),a(s,h),a(s,w),a(w,L),a(L,C),a(w,W),a(w,i),i.checked=e[5],a(w,P),ne(S,w,null),a(s,K),a(s,B),a(B,f),a(f,I),a(B,U),a(B,E),le(E,e[4]),a(B,V),ne(d,B,null),a(s,y),a(s,O),a(O,X),a(X,ce),a(O,he),a(O,H),le(H,e[3]),a(O,ye),ne(fe,O,null),a(s,Ve),a(s,pe),a(pe,Z),R&&R.m(Z,null),a(Z,Te),a(Z,Se),G=!0,Ne||(Ue=[z(u,"input",e[14]),z(u,"input",e[9]),z(i,"change",e[15]),z(i,"input",e[9]),z(E,"input",e[16]),z(E,"input",e[9]),z(H,"input",e[17]),z(H,"input",e[9]),z(s,"submit",Ke(e[10]))],Ne=!0)},p(c,[_]){(!G||_&4)&&o!==(o=c[2].auth.hostLabel()+"")&&se(n,o),(!G||_&128&&N!==(N="w-full "+c[7]("host")))&&r(u,"class",N),(!G||_&4&&$!==($=c[2].auth.hostPlaceholder()))&&r(u,"placeholder",$),_&64&&u.value!==c[6]&&le(u,c[6]);const oe={};_&2&&(oe.result=c[1]),b.$set(oe),(!G||_&4)&&D!==(D=c[2].auth.sslLabel()+"")&&se(C,D),(!G||_&128&&T!==(T=c[7]("ssl")))&&r(i,"class",T),_&32&&(i.checked=c[5]);const ke={};_&2&&(ke.result=c[1]),S.$set(ke),(!G||_&4)&&F!==(F=c[2].auth.idLabel()+"")&&se(I,F),(!G||_&128&&x!==(x="w-full "+c[7]("id")))&&r(E,"class",x),(!G||_&4&&Q!==(Q=c[2].auth.idPlaceholder()))&&r(E,"placeholder",Q),_&16&&E.value!==c[4]&&le(E,c[4]);const ie={};_&2&&(ie.result=c[1]),d.$set(ie),(!G||_&4)&&Y!==(Y=c[2].auth.passwordLabel()+"")&&se(ce,Y),(!G||_&128&&Le!==(Le="w-full "+c[7]("password")))&&r(H,"class",Le),(!G||_&4&&Pe!==(Pe=c[2].auth.passwordPlaceholder()))&&r(H,"placeholder",Pe),_&8&&H.value!==c[3]&&le(H,c[3]);const Ie={};_&2&&(Ie.result=c[1]),fe.$set(Ie),c[0]?R?_&1&&M(R,1):(R=Ge(),R.c(),M(R,1),R.m(Z,Te)):R&&(qe(),J(R,1,1,()=>{R=null}),je()),(!G||_&4)&&Ee!==(Ee=c[2].auth.signIn()+"")&&se(Se,Ee),(!G||_&256)&&(Z.disabled=c[8])},i(c){G||(M(b.$$.fragment,c),M(S.$$.fragment,c),M(d.$$.fragment,c),M(fe.$$.fragment,c),M(R),G=!0)},o(c){J(b.$$.fragment,c),J(S.$$.fragment,c),J(d.$$.fragment,c),J(fe.$$.fragment,c),J(R),G=!1},d(c){c&&m(s),ue(b),ue(S),ue(d),ue(fe),R&&R.d(),Ne=!1,We(Ue)}}}const _t=e=>Ye((s={},t)=>{t.length&&(xe(t),ge("host",e.errors.message.required(),()=>{ve(s.host).isNotBlank()}),ge("ssl",e.errors.message.required(),()=>{ve(s.ssl).isNotBlank()}),ge("id",e.errors.message.required(),()=>{ve(s.id).isNotBlank()}),ge("password",e.errors.message.required(),()=>{ve(s.password).isNotBlank()}))});function gt(e,s,t){let l,o,n,p,u,N,$,k,b,h;be(e,Ce,f=>t(2,b=f)),be(e,it,f=>t(13,h=f));let{onSignin:w}=s;const L=new Set,D=et(()=>{u({host:l,ssl:o,id:n,password:p},Array.from(L)).done(f=>{t(1,N=f)}),L.clear()},300);function C(){L.add("host"),L.add("ssl"),L.add("id"),L.add("password"),D(),D.flush()}function W(f){f.currentTarget.value=f.currentTarget.value,L.add(f.currentTarget.name),D()}let i=!1;async function T(f){try{if(t(0,i=!0),C(),N.isValid()){const F={host:l,ssl:o,id:n,password:p};await rt(F),tt(F),await w(F)}}catch(F){await Ze(F)}finally{t(0,i=!1)}}function P(){l=this.value,t(6,l),t(13,h)}function S(){o=this.checked,t(5,o),t(13,h)}function K(){n=this.value,t(4,n),t(13,h)}function B(){p=this.value,t(3,p),t(13,h)}return e.$$set=f=>{"onSignin"in f&&t(11,w=f.onSignin)},e.$$.update=()=>{e.$$.dirty&8192&&t(6,l=(h==null?void 0:h.host)||"p2p.aicacia.com"),e.$$.dirty&8192&&t(5,o=(h==null?void 0:h.ssl)!==!1),e.$$.dirty&8192&&t(4,n=(h==null?void 0:h.id)||""),e.$$.dirty&8192&&t(3,p=(h==null?void 0:h.password)||""),e.$$.dirty&4&&t(12,u=_t(b)),e.$$.dirty&4096&&t(1,N=u.get()),e.$$.dirty&1&&t(8,$=i),e.$$.dirty&2&&t(7,k=Qe(N,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[i,N,b,p,n,o,l,k,$,W,T,w,u,h,P,S,K,B]}class vt extends Be{constructor(s){super(),Oe(this,s,gt,mt,De,{onSignin:11})}}function Je(e){let s,t,l,o;return l=new Xe({}),{c(){s=g("div"),t=g("div"),ae(l.$$.fragment),this.h()},l(n){s=v(n,"DIV",{class:!0});var p=A(s);t=v(p,"DIV",{class:!0});var u=A(t);re(l.$$.fragment,u),u.forEach(m),p.forEach(m),this.h()},h(){r(t,"class","inline-block h-6 w-6"),r(s,"class","mr-2 flex flex-row justify-center")},m(n,p){we(n,s,p),a(s,t),ne(l,t,null),o=!0},i(n){o||(M(l.$$.fragment,n),o=!0)},o(n){J(l.$$.fragment,n),o=!1},d(n){n&&m(s),ue(l)}}}function bt(e){let s,t,l,o=e[2].auth.hostLabel()+"",n,p,u,N,$,k,b,h,w,L,D=e[2].auth.sslLabel()+"",C,W,i,T,P,S,K,B,f,F,I=e[2].auth.signIn()+"",U,E,x,Q;b=new _e({props:{name:"host",result:e[1]}}),S=new _e({props:{name:"ssl",result:e[1]}});let V=e[0]&&Je();return{c(){s=g("form"),t=g("div"),l=g("label"),n=ee(o),p=q(),u=g("input"),k=q(),ae(b.$$.fragment),h=q(),w=g("div"),L=g("label"),C=ee(D),W=q(),i=g("input"),P=q(),ae(S.$$.fragment),K=q(),B=g("div"),f=g("button"),V&&V.c(),F=q(),U=ee(I),this.h()},l(d){s=v(d,"FORM",{});var y=A(s);t=v(y,"DIV",{class:!0});var O=A(t);l=v(O,"LABEL",{for:!0});var X=A(l);n=te(X,o),X.forEach(m),p=j(O),u=v(O,"INPUT",{class:!0,type:!0,name:!0,placeholder:!0}),k=j(O),re(b.$$.fragment,O),O.forEach(m),h=j(y),w=v(y,"DIV",{class:!0});var Y=A(w);L=v(Y,"LABEL",{for:!0});var ce=A(L);C=te(ce,D),ce.forEach(m),W=j(Y),i=v(Y,"INPUT",{class:!0,type:!0,name:!0}),P=j(Y),re(S.$$.fragment,Y),Y.forEach(m),K=j(y),B=v(y,"DIV",{class:!0});var he=A(B);f=v(he,"BUTTON",{type:!0,class:!0});var H=A(f);V&&V.l(H),F=j(H),U=te(H,I),H.forEach(m),he.forEach(m),y.forEach(m),this.h()},h(){r(l,"for","host"),r(u,"class",N="w-full "+e[5]("host")),r(u,"type","text"),r(u,"name","host"),r(u,"placeholder",$=e[2].auth.hostPlaceholder()),r(t,"class","mb-2"),r(L,"for","ssl"),r(i,"class",T=e[5]("ssl")),r(i,"type","checkbox"),r(i,"name","ssl"),r(w,"class","mb-2"),r(f,"type","submit"),r(f,"class","btn primary flex flex-shrink"),f.disabled=e[6],r(B,"class","flex flex-row justify-end")},m(d,y){we(d,s,y),a(s,t),a(t,l),a(l,n),a(t,p),a(t,u),le(u,e[4]),a(t,k),ne(b,t,null),a(s,h),a(s,w),a(w,L),a(L,C),a(w,W),a(w,i),i.checked=e[3],a(w,P),ne(S,w,null),a(s,K),a(s,B),a(B,f),V&&V.m(f,null),a(f,F),a(f,U),E=!0,x||(Q=[z(u,"input",e[12]),z(u,"input",e[7]),z(i,"change",e[13]),z(i,"input",e[7]),z(s,"submit",Ke(e[8]))],x=!0)},p(d,[y]){(!E||y&4)&&o!==(o=d[2].auth.hostLabel()+"")&&se(n,o),(!E||y&32&&N!==(N="w-full "+d[5]("host")))&&r(u,"class",N),(!E||y&4&&$!==($=d[2].auth.hostPlaceholder()))&&r(u,"placeholder",$),y&16&&u.value!==d[4]&&le(u,d[4]);const O={};y&2&&(O.result=d[1]),b.$set(O),(!E||y&4)&&D!==(D=d[2].auth.sslLabel()+"")&&se(C,D),(!E||y&32&&T!==(T=d[5]("ssl")))&&r(i,"class",T),y&8&&(i.checked=d[3]);const X={};y&2&&(X.result=d[1]),S.$set(X),d[0]?V?y&1&&M(V,1):(V=Je(),V.c(),M(V,1),V.m(f,F)):V&&(qe(),J(V,1,1,()=>{V=null}),je()),(!E||y&4)&&I!==(I=d[2].auth.signIn()+"")&&se(U,I),(!E||y&64)&&(f.disabled=d[6])},i(d){E||(M(b.$$.fragment,d),M(S.$$.fragment,d),M(V),E=!0)},o(d){J(b.$$.fragment,d),J(S.$$.fragment,d),J(V),E=!1},d(d){d&&m(s),ue(b),ue(S),V&&V.d(),x=!1,We(Q)}}}const wt=e=>Ye((s={},t)=>{t.length&&(xe(t),ge("host",e.errors.message.required(),()=>{ve(s.host).isNotBlank()}),ge("ssl",e.errors.message.required(),()=>{ve(s.ssl).isNotBlank()}))});function Et(e,s,t){let l,o,n,p,u,N,$,k;be(e,Ce,P=>t(2,$=P)),be(e,ft,P=>t(11,k=P));let{onSignin:b}=s;const h=new Set,w=et(()=>{n({host:l,ssl:o},Array.from(h)).done(P=>{t(1,p=P)}),h.clear()},300);function L(){h.add("host"),h.add("ssl"),h.add("id"),h.add("password"),w(),w.flush()}function D(P){P.currentTarget.value=P.currentTarget.value,h.add(P.currentTarget.name),w()}let C=!1;async function W(P){try{if(t(0,C=!0),L(),p.isValid()){const S={host:l,ssl:o},K=new nt({...ut,basePath:ht(S.host,S.ssl)}),f=await new ot(K).p2pAccess();ct(S),tt(f),await b(S)}}catch(S){await Ze(S)}finally{t(0,C=!1)}}function i(){l=this.value,t(4,l),t(11,k)}function T(){o=this.checked,t(3,o),t(11,k)}return e.$$set=P=>{"onSignin"in P&&t(9,b=P.onSignin)},e.$$.update=()=>{e.$$.dirty&2048&&t(4,l=(k==null?void 0:k.host)||"127.0.0.1:3000"),e.$$.dirty&2048&&t(3,o=(k==null?void 0:k.ssl)||!1),e.$$.dirty&4&&t(10,n=wt($)),e.$$.dirty&1024&&t(1,p=n.get()),e.$$.dirty&1&&t(6,u=C),e.$$.dirty&2&&t(5,N=Qe(p,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[C,p,$,o,l,N,u,D,W,b,n,k,i,T]}class kt extends Be{constructor(s){super(),Oe(this,s,Et,bt,De,{onSignin:9})}}function It(e){let s,t;return s=new kt({props:{onSignin:e[2]}}),{c(){ae(s.$$.fragment)},l(l){re(s.$$.fragment,l)},m(l,o){ne(s,l,o),t=!0},p:ze,i(l){t||(M(s.$$.fragment,l),t=!0)},o(l){J(s.$$.fragment,l),t=!1},d(l){ue(s,l)}}}function Lt(e){let s,t;return s=new vt({props:{onSignin:e[2]}}),{c(){ae(s.$$.fragment)},l(l){re(s.$$.fragment,l)},m(l,o){ne(s,l,o),t=!0},p:ze,i(l){t||(M(s.$$.fragment,l),t=!0)},o(l){J(s.$$.fragment,l),t=!1},d(l){ue(s,l)}}}function Pt(e){let s,t,l,o,n,p,u=e[0].auth.signIn()+"",N,$,k,b,h=e[0].auth.httpAccess()+"",w,L,D=e[0].auth.p2pAccess()+"",C,W,i,T,P,S,K;document.title=s=e[0].auth.signIn();const B=[Lt,It],f=[];function F(I,U){return I[1]==="p2p"?0:I[1]==="http"?1:-1}return~(i=F(e))&&(T=f[i]=B[i](e)),{c(){t=q(),l=g("div"),o=g("div"),n=g("div"),p=g("h1"),N=ee(u),$=q(),k=g("select"),b=g("option"),w=ee(h),L=g("option"),C=ee(D),W=q(),T&&T.c(),this.h()},l(I){lt("svelte-1jem6qx",document.head).forEach(m),t=j(I),l=v(I,"DIV",{class:!0});var E=A(l);o=v(E,"DIV",{class:!0});var x=A(o);n=v(x,"DIV",{class:!0});var Q=A(n);p=v(Q,"H1",{class:!0});var V=A(p);N=te(V,u),V.forEach(m),$=j(Q),k=v(Q,"SELECT",{name:!0});var d=A(k);b=v(d,"OPTION",{});var y=A(b);w=te(y,h),y.forEach(m),L=v(d,"OPTION",{});var O=A(L);C=te(O,D),O.forEach(m),d.forEach(m),W=j(Q),T&&T.l(Q),Q.forEach(m),x.forEach(m),E.forEach(m),this.h()},h(){r(p,"class","mb-1"),b.__value="http",le(b,b.__value),L.__value="p2p",le(L,L.__value),r(k,"name","access"),e[1]===void 0&&st(()=>e[3].call(k)),r(n,"class","flex flex-grow flex-col bg-white p-4 shadow dark:bg-gray-800"),r(o,"class","mx-auto flex w-full flex-shrink flex-col p-4 py-10 md:w-72"),r(l,"class","flex flex-grow flex-col justify-end md:justify-start")},m(I,U){we(I,t,U),we(I,l,U),a(l,o),a(o,n),a(n,p),a(p,N),a(n,$),a(n,k),a(k,b),a(b,w),a(k,L),a(L,C),Re(k,e[1],!0),a(n,W),~i&&f[i].m(n,null),P=!0,S||(K=z(k,"change",e[3]),S=!0)},p(I,[U]){(!P||U&1)&&s!==(s=I[0].auth.signIn())&&(document.title=s),(!P||U&1)&&u!==(u=I[0].auth.signIn()+"")&&se(N,u),(!P||U&1)&&h!==(h=I[0].auth.httpAccess()+"")&&se(w,h),(!P||U&1)&&D!==(D=I[0].auth.p2pAccess()+"")&&se(C,D),U&2&&Re(k,I[1]);let E=i;i=F(I),i===E?~i&&f[i].p(I,U):(T&&(qe(),J(f[E],1,1,()=>{f[E]=null}),je()),~i?(T=f[i],T?T.p(I,U):(T=f[i]=B[i](I),T.c()),M(T,1),T.m(n,null)):T=null)},i(I){P||(M(T),P=!0)},o(I){J(T),P=!1},d(I){I&&(m(t),m(l)),~i&&f[i].d(),S=!1,K()}}}function Tt(e,s,t){let l,o;be(e,Ce,u=>t(0,l=u)),be(e,Me,u=>t(1,o=u));async function n(){await pt(`${dt}/`)}function p(){o=at(this),Me.set(o)}return[l,o,n,p]}class jt extends Be{constructor(s){super(),Oe(this,s,Tt,Pt,De,{})}}export{jt as component};
