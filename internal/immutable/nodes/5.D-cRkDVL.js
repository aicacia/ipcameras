import{c as je,a as ce}from"../chunks/index.CqveVWXc.js";import{f as ye,m as T,q as G,a as J,u as K,g as X,b as F,n as ne,w as Ce,v as $e,r as Ne,l as ae,d as B,o as Oe,x as Ue,c as Le,i as Se}from"../chunks/scheduler.Bu9aYH8f.js";import{S as q,i as z,c as L,d as S,m as M,o as w,p as V,q as P,e as y,s as O,a as $,b as D,f as U,h as _,j as E,k as N,l as k,y as Q,w as R,E as W,K as Y,G as ee,I as Me,u as Pe,H as Te,r as qe,t as te,g as le,n as se,v as Z}from"../chunks/index.QYv70b3f.js";import{e as x,u as Ee,o as ze,d as Ae}from"../chunks/each.C8Rgkwia.js";import{L as He}from"../chunks/i18n-svelte.DgV7mMaz.js";import{I as Ie,g as De,a as Ve}from"../chunks/Icon.CkcrXJuI.js";import{p as Be,D as Ge}from"../chunks/Dropdown.CcNYrred.js";import{f as de,a as _e}from"../chunks/index.DHw_VhY_.js";const Je=async o=>({cameras:await je.cameras()}),bt=Object.freeze(Object.defineProperty({__proto__:null,load:Je},Symbol.toStringTag,{value:"Module"}));function Ke(o){let e;const s=o[2].default,t=J(s,o,o[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&K(t,s,l,l[3],e?F(s,l[3],n,null):X(l[3]),null)},i(l){e||(w(t,l),e=!0)},o(l){V(t,l),e=!1},d(l){t&&t.d(l)}}}function Xe(o){let e,s;const t=[{name:"play"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Ke]},$$scope:{ctx:o}};for(let n=0;n<t.length;n+=1)l=T(l,t[n]);return e=new Ie({props:l}),{c(){L(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,a){M(e,n,a),s=!0},p(n,[a]){const r=a&3?De(t,[t[0],a&2&&Ve(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){s||(w(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){P(e,n)}}}function Fe(o,e,s){let{$$slots:t={},$$scope:l}=e;const n=[["polygon",{points:"6 3 20 12 6 21 6 3"}]];return o.$$set=a=>{s(1,e=T(T({},e),G(a))),"$$scope"in a&&s(3,l=a.$$scope)},e=G(e),[n,e,t,l]}class Qe extends q{constructor(e){super(),z(this,e,Fe,Xe,ye,{})}}function Re(o){let e;const s=o[2].default,t=J(s,o,o[3],null);return{c(){t&&t.c()},l(l){t&&t.l(l)},m(l,n){t&&t.m(l,n),e=!0},p(l,n){t&&t.p&&(!e||n&8)&&K(t,s,l,l[3],e?F(s,l[3],n,null):X(l[3]),null)},i(l){e||(w(t,l),e=!0)},o(l){V(t,l),e=!1},d(l){t&&t.d(l)}}}function We(o){let e,s;const t=[{name:"x"},o[1],{iconNode:o[0]}];let l={$$slots:{default:[Re]},$$scope:{ctx:o}};for(let n=0;n<t.length;n+=1)l=T(l,t[n]);return e=new Ie({props:l}),{c(){L(e.$$.fragment)},l(n){S(e.$$.fragment,n)},m(n,a){M(e,n,a),s=!0},p(n,[a]){const r=a&3?De(t,[t[0],a&2&&Ve(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(r.$$scope={dirty:a,ctx:n}),e.$set(r)},i(n){s||(w(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){P(e,n)}}}function Ye(o,e,s){let{$$slots:t={},$$scope:l}=e;const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return o.$$set=a=>{s(1,e=T(T({},e),G(a))),"$$scope"in a&&s(3,l=a.$$scope)},e=G(e),[n,e,t,l]}class Ze extends q{constructor(e){super(),z(this,e,Ye,We,ye,{})}}const xe=o=>({}),me=o=>({});function he(o){let e,s,t;return{c(){e=y("div"),this.h()},l(l){e=$(l,"DIV",{class:!0}),D(e).forEach(_),this.h()},h(){E(e,"class","fixed inset-0 bg-black bg-opacity-25"),W(e,"hidden",o[2]?!o[0]:!0)},m(l,n){N(l,e,n),t=!0},p(l,n){(!t||n&5)&&W(e,"hidden",l[2]?!l[0]:!0)},i(l){t||(l&&$e(()=>{t&&(s||(s=Y(e,de,{duration:150},!0)),s.run(1))}),t=!0)},o(l){l&&(s||(s=Y(e,de,{duration:150},!1)),s.run(0)),t=!1},d(l){l&&_(e),l&&s&&s.end()}}}function pe(o){let e,s,t,l,n,a,r,f,i,h,g,b,v,m,C;const c=o[9].title,u=J(c,o,o[8],me);i=new Ze({});const p=o[9].default,I=J(p,o,o[8],null);return{c(){e=y("div"),s=y("div"),t=y("div"),l=y("div"),n=y("div"),u&&u.c(),a=O(),r=y("button"),f=y("div"),L(i.$$.fragment),h=O(),g=y("div"),I&&I.c(),this.h()},l(d){e=$(d,"DIV",{class:!0});var j=D(e);s=$(j,"DIV",{class:!0});var oe=D(s);t=$(oe,"DIV",{class:!0});var A=D(t);l=$(A,"DIV",{class:!0});var H=D(l);n=$(H,"DIV",{class:!0});var re=D(n);u&&u.l(re),re.forEach(_),a=U(H),r=$(H,"BUTTON",{class:!0});var ie=D(r);f=$(ie,"DIV",{class:!0});var fe=D(f);S(i.$$.fragment,fe),fe.forEach(_),ie.forEach(_),H.forEach(_),h=U(A),g=$(A,"DIV",{class:!0});var ue=D(g);I&&I.l(ue),ue.forEach(_),A.forEach(_),oe.forEach(_),j.forEach(_),this.h()},h(){E(n,"class","flex flex-grow flex-col"),E(f,"class","h-6 w-6"),E(r,"class","btn icon"),E(l,"class","flex flex-shrink flex-row items-start justify-between px-4 pt-4"),E(g,"class","relative flex-grow flex-col px-4 pb-4 pt-0"),E(t,"class","relative w-full rounded bg-white shadow-lg sm:my-8 sm:max-w-lg dark:bg-gray-800"),W(t,"m-auto",o[1]),E(s,"class","flex min-h-full items-end justify-center p-4 sm:items-center sm:p-0"),E(e,"class","fixed inset-0 overflow-y-auto")},m(d,j){N(d,e,j),k(e,s),k(s,t),k(t,l),k(l,n),u&&u.m(n,null),k(l,a),k(l,r),k(r,f),M(i,f,null),k(t,h),k(t,g),I&&I.m(g,null),o[10](t),v=!0,m||(C=[ee(r,"click",Me(o[4])),ee(e,"pointerdown",o[5])],m=!0)},p(d,j){u&&u.p&&(!v||j&256)&&K(u,c,d,d[8],v?F(c,d[8],j,xe):X(d[8]),me),I&&I.p&&(!v||j&256)&&K(I,p,d,d[8],v?F(p,d[8],j,null):X(d[8]),null),(!v||j&2)&&W(t,"m-auto",d[1])},i(d){v||(w(u,d),w(i.$$.fragment,d),w(I,d),d&&$e(()=>{v&&(b||(b=Y(e,_e,{duration:150,y:300},!0)),b.run(1))}),v=!0)},o(d){V(u,d),V(i.$$.fragment,d),V(I,d),d&&(b||(b=Y(e,_e,{duration:150,y:300},!1)),b.run(0)),v=!1},d(d){d&&_(e),u&&u.d(d),P(i),I&&I.d(d),o[10](null),d&&b&&b.end(),m=!1,Ne(C)}}}function et(o){let e,s,t,l,n,a=o[0]&&he(o),r=o[0]&&pe(o);return{c(){e=y("div"),a&&a.c(),s=O(),r&&r.c(),this.h()},l(f){e=$(f,"DIV",{class:!0,role:!0,"aria-modal":!0});var i=D(e);a&&a.l(i),s=U(i),r&&r.l(i),i.forEach(_),this.h()},h(){E(e,"class","relative"),E(e,"role","dialog"),E(e,"aria-modal","true")},m(f,i){N(f,e,i),a&&a.m(e,null),k(e,s),r&&r.m(e,null),t=!0,l||(n=Ce(Be.call(null,e)),l=!0)},p(f,[i]){f[0]?a?(a.p(f,i),i&1&&w(a,1)):(a=he(f),a.c(),w(a,1),a.m(e,s)):a&&(Q(),V(a,1,1,()=>{a=null}),R()),f[0]?r?(r.p(f,i),i&1&&w(r,1)):(r=pe(f),r.c(),w(r,1),r.m(e,null)):r&&(Q(),V(r,1,1,()=>{r=null}),R())},i(f){t||(w(a),w(r),t=!0)},o(f){V(a),V(r),t=!1},d(f){f&&_(e),a&&a.d(),r&&r.d(),l=!1,n()}}}function tt(o,e,s){let{$$slots:t={},$$scope:l}=e,{onClose:n=()=>{}}=e,{small:a=!1}=e,{open:r=!1}=e,{backdrop:f=!0}=e,{backgroundClose:i=f}=e;function h(){s(0,r=!1),n()}let g;function b(m){if(i){if(g.contains(m.target)){m.stopPropagation();return}r&&(s(0,r=!1),n())}}function v(m){ae[m?"unshift":"push"](()=>{g=m,s(3,g)})}return o.$$set=m=>{"onClose"in m&&s(6,n=m.onClose),"small"in m&&s(1,a=m.small),"open"in m&&s(0,r=m.open),"backdrop"in m&&s(2,f=m.backdrop),"backgroundClose"in m&&s(7,i=m.backgroundClose),"$$scope"in m&&s(8,l=m.$$scope)},[r,a,f,g,h,b,n,i,l,t,v]}class lt extends q{constructor(e){super(),z(this,e,tt,et,ne,{onClose:6,small:1,open:0,backdrop:2,backgroundClose:7})}}function st(o){let e,s='<track kind="captions"/>';return{c(){e=y("video"),e.innerHTML=s,this.h()},l(t){e=$(t,"VIDEO",{class:!0,"data-svelte-h":!0}),Pe(e)!=="svelte-jsai1z"&&(e.innerHTML=s),this.h()},h(){E(e,"class","w-full"),e.controls=!0,e.autoplay=!0},m(t,l){N(t,e,l),o[2](e)},p:B,i:B,o:B,d(t){t&&_(e),o[2](null)}}}function nt(o,e,s){let{rtspUrl:t}=e,l,n,a=!1;async function r(i){i.ready().then(()=>{console.debug(`${i.getId()}: ready`),i.send(JSON.stringify({type:"rtsp",rtspUrl:t}))});let h=new MediaStream;s(0,n.srcObject=h,n),i.on("track",g=>{h.addTrack(g.track)}),i.on("close",()=>{a&&(i=ce("webrtcrtsp"),r(i))})}Oe(()=>(a=!0,l=ce("webrtcrtsp"),r(l),()=>{a=!1,l==null||l.close()}));function f(i){ae[i?"unshift":"push"](()=>{n=i,s(0,n)})}return o.$$set=i=>{"rtspUrl"in i&&s(1,t=i.rtspUrl)},[n,t,f]}class at extends q{constructor(e){super(),z(this,e,nt,st,ne,{rtspUrl:1})}}function ge(o,e,s){const t=o.slice();return t[7]=e[s],t}function ve(o,e,s){const t=o.slice();return t[10]=e[s],t}function be(o,e){let s,t=e[10]+"",l,n,a,r;return{key:o,first:null,c(){s=y("li"),l=te(t),n=O(),this.h()},l(f){s=$(f,"LI",{class:!0});var i=D(s);l=le(i,t),n=U(i),i.forEach(_),this.h()},h(){E(s,"class","flex cursor-pointer flex-row justify-between p-2 hover:bg-gray-200 dark:hover:bg-gray-600"),this.first=s},m(f,i){N(f,s,i),k(s,l),k(s,n),a||(r=ee(s,"click",function(){Se(e[5](e[7],e[10]))&&e[5](e[7],e[10]).apply(this,arguments)}),a=!0)},p(f,i){e=f,i&1&&t!==(t=e[10]+"")&&se(l,t)},d(f){f&&_(s),a=!1,r()}}}function ot(o){let e=[],s=new Map,t,l=x(Object.keys(o[7].mediaUris));const n=a=>a[10];for(let a=0;a<l.length;a+=1){let r=ve(o,l,a),f=n(r);s.set(f,e[a]=be(f,r))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=Z()},l(a){for(let r=0;r<e.length;r+=1)e[r].l(a);t=Z()},m(a,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,r);N(a,t,r)},p(a,r){r&33&&(l=x(Object.keys(a[7].mediaUris)),e=Ee(e,r,n,1,a,l,s,t.parentNode,Ae,be,t,ve))},d(a){a&&_(t);for(let r=0;r<e.length;r+=1)e[r].d(a)}}}function rt(o){let e,s;return e=new Qe({props:{slot:"button"}}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p:B,i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function ke(o,e){let s,t,l,n=e[7].name+"",a,r,f,i=e[7].updatedAt.toLocaleString()+"",h,g,b,v,m,C;return v=new Ge({props:{$$slots:{button:[rt],default:[ot]},$$scope:{ctx:e}}}),{key:o,first:null,c(){s=y("div"),t=y("div"),l=y("p"),a=te(n),r=O(),f=y("p"),h=te(i),g=O(),b=y("div"),L(v.$$.fragment),m=O(),this.h()},l(c){s=$(c,"DIV",{class:!0});var u=D(s);t=$(u,"DIV",{class:!0});var p=D(t);l=$(p,"P",{});var I=D(l);a=le(I,n),I.forEach(_),r=U(p),f=$(p,"P",{});var d=D(f);h=le(d,i),d.forEach(_),p.forEach(_),g=U(u),b=$(u,"DIV",{class:!0});var j=D(b);S(v.$$.fragment,j),j.forEach(_),m=U(u),u.forEach(_),this.h()},h(){E(t,"class","flex flex-row"),E(b,"class","flex flex-row"),E(s,"class","flex flex-row justify-between"),this.first=s},m(c,u){N(c,s,u),k(s,t),k(t,l),k(l,a),k(t,r),k(t,f),k(f,h),k(s,g),k(s,b),M(v,b,null),k(s,m),C=!0},p(c,u){e=c,(!C||u&1)&&n!==(n=e[7].name+"")&&se(a,n),(!C||u&1)&&i!==(i=e[7].updatedAt.toLocaleString()+"")&&se(h,i);const p={};u&8193&&(p.$$scope={dirty:u,ctx:e}),v.$set(p)},i(c){C||(w(v.$$.fragment,c),C=!0)},o(c){V(v.$$.fragment,c),C=!1},d(c){c&&_(s),P(v)}}}function we(o){let e,s;return e=new at({props:{rtspUrl:o[2].mediaUris[o[3]]}}),{c(){L(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,l){M(e,t,l),s=!0},p(t,l){const n={};l&12&&(n.rtspUrl=t[2].mediaUris[t[3]]),e.$set(n)},i(t){s||(w(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function it(o){let e,s,t=o[2]&&o[3]&&we(o);return{c(){t&&t.c(),e=Z()},l(l){t&&t.l(l),e=Z()},m(l,n){t&&t.m(l,n),N(l,e,n),s=!0},p(l,n){l[2]&&l[3]?t?(t.p(l,n),n&12&&w(t,1)):(t=we(l),t.c(),w(t,1),t.m(e.parentNode,e)):t&&(Q(),V(t,1,1,()=>{t=null}),R())},i(l){s||(w(t),s=!0)},o(l){V(t),s=!1},d(l){l&&_(e),t&&t.d(l)}}}function ft(o){let e,s,t,l,n,a=[],r=new Map,f,i,h,g;document.title=e=o[4].cameras.title();let b=x(o[0].cameras);const v=c=>c[7].hardwareId;for(let c=0;c<b.length;c+=1){let u=ge(o,b,c),p=v(u);r.set(p,a[c]=ke(p,u))}function m(c){o[6](c)}let C={$$slots:{default:[it]},$$scope:{ctx:o}};return o[1]!==void 0&&(C.open=o[1]),i=new lt({props:C}),ae.push(()=>Te(i,"open",m)),{c(){s=O(),t=y("div"),l=y("div"),n=y("div");for(let c=0;c<a.length;c+=1)a[c].c();f=O(),L(i.$$.fragment),this.h()},l(c){qe("svelte-1uyq96z",document.head).forEach(_),s=U(c),t=$(c,"DIV",{class:!0});var p=D(t);l=$(p,"DIV",{class:!0});var I=D(l);n=$(I,"DIV",{class:!0});var d=D(n);for(let j=0;j<a.length;j+=1)a[j].l(d);d.forEach(_),I.forEach(_),p.forEach(_),f=U(c),S(i.$$.fragment,c),this.h()},h(){E(n,"class","flex flex-col"),E(l,"class","mx-auto mt-4 flex w-full max-w-6xl flex-shrink flex-col bg-white p-4 shadow dark:bg-gray-800"),E(t,"class","flex flex-col justify-end px-4 md:justify-start")},m(c,u){N(c,s,u),N(c,t,u),k(t,l),k(l,n);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(n,null);N(c,f,u),M(i,c,u),g=!0},p(c,[u]){(!g||u&16)&&e!==(e=c[4].cameras.title())&&(document.title=e),u&33&&(b=x(c[0].cameras),Q(),a=Ee(a,u,v,1,c,b,r,n,ze,ke,null,ge),R());const p={};u&8204&&(p.$$scope={dirty:u,ctx:c}),!h&&u&2&&(h=!0,p.open=c[1],Ue(()=>h=!1)),i.$set(p)},i(c){if(!g){for(let u=0;u<b.length;u+=1)w(a[u]);w(i.$$.fragment,c),g=!0}},o(c){for(let u=0;u<a.length;u+=1)V(a[u]);V(i.$$.fragment,c),g=!1},d(c){c&&(_(s),_(t),_(f));for(let u=0;u<a.length;u+=1)a[u].d();P(i,c)}}}function ut(o,e,s){let t;Le(o,He,h=>s(4,t=h));let{data:l}=e,n=!1,a,r;function f(h,g){return()=>{s(1,n=!0),s(2,a=h),s(3,r=g)}}function i(h){n=h,s(1,n)}return o.$$set=h=>{"data"in h&&s(0,l=h.data)},[l,n,a,r,t,f,i]}class kt extends q{constructor(e){super(),z(this,e,ut,ft,ne,{data:0})}}export{kt as component,bt as universal};
